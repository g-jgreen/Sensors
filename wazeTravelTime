{
    "name": "wazeTravelTime",
    "version": "0.0.2",
    "type": "sensor",
    "script": "var API_KEY = options.requiredProperties.key || options.globalSettings.MASHAPE_KEY;\nvar from = options.requiredProperties.from;\nvar to = options.requiredProperties.to;\n\nconsole.log(url);\nif(from === undefined || to === undefined)\n  send(new Error(\"url not defined\"));\nelse {\n    var url = \"https://bestapi-waze-free-v1.p.mashape.com/routes?end=\"+to + \"&start=\"+from;\n    // These code snippets use an open-source library. http://unirest.io/nodejs\n    unirest.get(url)\n    .header(\"X-Mashape-Key\", API_KEY)\n    .end(function (result) {\n      console.log(result.body);\n      var res = result.body;\n      var state = \"Found\";\n      if(\"route response is empty\" == res)\n        state = \"Not Found\";\n      var value = {\n          observedState: state,\n          rawData : {\n                travelTime : res\n          }\n      };\n      send(null, value);\n    });\n}\n",
    "metadata": {
        "author": "",
        "category": "Smart City",
        "description": "Travel time estimation based on Waze API.",
        "documentationURL": "https://www.mashape.com/bestapi/free-waze-route-calculation#routes-calculation-free-text",
        "iconURL": "https://lh3.ggpht.com/7JPOKRuanUwnX42dJ9H-PscC-sRkK43GQGRoklxusB4FKBPJEOJY3c7ZhQbcsXol-v8=w300",
        "supportedStates": [
            "Found",
            "Not Found"
        ],
        "requiredProperties": [
            "from",
            "to"
        ],
        "requiredRawData": [],
        "rawData": []
    }
}
